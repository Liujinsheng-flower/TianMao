"use strict";$(function(){$.get("http://47.104.244.134:8080/cartlist.do",{token:$.cookie("token")},function(t){for(var n="",a=0;a<t.length;a++)n+='\n\t\t\t\t<li data-id="'+t[a].id+'" data-gid="'+t[a].gid+'">\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<input type="checkbox" class="chk"/>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<a class="list_pic_min"><img src="'+t[a].goods.picurl+'"/></a>\n\t\t\t\t\t\t\t\t<span class="list_pic_max"><a href=""><img src="'+t[a].goods.picurl+'"/></a></span>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p><a href="" class="goods_name">'+t[a].goods.name+'</a></p>\n\t\t\t\t\t\t\t<p></p>\n\t\t\t\t\t\t\t<p><span>￥</span><span class="danjia">'+t[a].goods.price+'</span></p>\n\t\t\t\t\t\t\t<p><input type="button" class="minus" value="-"><input type="text" class="count" value="'+t[a].count+'"/><input type="button" class="plus" value="+"></p>\n\t\t\t\t\t\t\t<p><span>￥</span><span class="dan_totl">'+t[a].goods.price*t[a].count+'</span></p>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<span><a href="">移入收藏夹</a></span>\n\t\t\t\t\t\t\t\t<span><a class="del" data-id="'+t[a].id+'" data-gid="'+t[a].gid+'">删除</a></span>\n\t\t\t\t\t\t\t\t<span class="icon iconfont xsbb"><a href="">相似宝贝</a>&#xe66c;</span>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</li>\n\t\n\t\t\t';$(".cart_list_body ul").append(n),$(".cartnum").html($(".cart_list_body ul li").length),$(".qbsp").html($(".cart_list_body ul li").length);for(var e=function(a){$(".list_pic_min").eq(a).mousemove(function(){$(".list_pic_max").eq(a).css({display:"block"})}),$(".list_pic_min").eq(a).mouseleave(function(){$(".list_pic_max").eq(a).css({display:"none"})}),$(".plus").eq(a).click(function(){$(".count").eq(a).val(parseInt($(".count").eq(a).val())+1),$(".minus").eq(a).attr("disabled",!1);var t=$(this).parent().parent().parent().attr("data-id"),n=$(this).parent().parent().parent().attr("data-gid");s(),c(t,n,1,$.cookie("token"))}),$(".minus").eq(a).click(function(){var t=$(this).parent().parent().parent().attr("data-id"),n=$(this).parent().parent().parent().attr("data-gid");"1"==$(".count").eq(a).val()?($(".count").eq(a).val("1"),$(this).attr("disabled",!0)):($(".count").eq(a).val(parseInt($(".count").eq(a).val())-1),s(),c(t,n,-1,$.cookie("token")))}),$(".del").eq(a).click(function(){!function(t,n,a,e){$(".cart_list_body ul").find(e).remove(),c(t,n,0,a)}($(this).parent().parent().parent().parent().attr("data-id"),$(this).parent().parent().parent().parent().attr("data-gid"),$.cookie("token"),$(this).parent().parent().parent().parent()),s(),$(".cartnum").html($(".cart_list_body ul li").length),$(".qbsp").html($(".cart_list_body ul li").length)}),$(".quanxuan").on("click",function(){$("input:checkbox").prop("checked",$(this).prop("checked")),$(this).prop("checked")?$(".cart_list_body li div").css({background:"rgb(255,245,225)"}):$(".cart_list_body li div").css({background:"rgb(252,252,252)"}),s()}),$(".cart_list_body li div input:checkbox").on("click",function(){$(".cart_list_body li div input:checkbox").length==$(".cart_list_body li div input:checked").length?$(".quanxuan").prop("checked",!0):$(".quanxuan").prop("checked",!1),s()}),$(".chk").eq(a).click(function(){$(this).prop("checked")?$(this).parent().parent().css({background:"rgb(255,248,225)"}):$(this).parent().parent().css({background:"rgb(252,252,252)"})})},i=0;i<$(".plus").length;i++)e(i);function c(t,n,a,e){$.get("http://47.104.244.134:8080/cartupdate.do",{id:t,gid:n,num:a,token:e},function(t){})}function s(){for(var t=0;t<$(".danjia").length;t++)$(".dan_totl").eq(t).html(parseInt($(".count").eq(t).val())*parseInt($(".danjia").eq(t).html()));var n=0;for(t=0;t<$(".chk").length;t++)$(".chk").eq(t).prop("checked")&&(n+=parseInt($(".dan_totl").eq(t).html())),$(".yxsp").html(n).next().attr("disabled",!1).css({background:"orange",cursor:"pointer"}).click(function(){location.href="index.html"})}}),$(".jiesuan").attr("disabled",!0).css({cursor:"not-allowed"})});